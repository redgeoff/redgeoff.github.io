<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.78.1"><title>What are MSON Template Queries? &#183; redgeoff</title><meta name=description content="Template Queries are dynamic templates constructed with MongoDB-style operators. They allow you to customize MSON components with less code and are very extensible."><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZMV9CF3YF6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-ZMV9CF3YF6');</script><meta itemprop=name content="What are MSON Template Queries?"><meta itemprop=description content="Template Queries are dynamic templates constructed with MongoDB-style operators. They allow you to customize MSON components with less code and are very extensible."><meta itemprop=datePublished content="2021-02-08T00:00:00+00:00"><meta itemprop=dateModified content="2021-02-08T00:00:00+00:00"><meta itemprop=wordCount content="950"><meta itemprop=image content="https://redgeoff.com/posts/template-queries/template-queries.png"><meta itemprop=keywords content="javascript,json,programming,mongodb,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://redgeoff.com/posts/template-queries/template-queries.png"><meta name=twitter:title content="What are MSON Template Queries?"><meta name=twitter:description content="Template Queries are dynamic templates constructed with MongoDB-style operators. They allow you to customize MSON components with less code and are very extensible."><meta property="og:title" content="What are MSON Template Queries?"><meta property="og:description" content="Template Queries are dynamic templates constructed with MongoDB-style operators. They allow you to customize MSON components with less code and are very extensible."><meta property="og:type" content="article"><meta property="og:url" content="https://redgeoff.com/posts/template-queries/"><meta property="og:image" content="https://redgeoff.com/posts/template-queries/template-queries.png"><meta property="article:published_time" content="2021-02-08T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-08T00:00:00+00:00"><meta property="og:see_also" content="https://redgeoff.com/posts/mson-react-material-ui-form/"><meta property="og:see_also" content="https://redgeoff.com/posts/everyone-can-make-software/"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://redgeoff.com/#author","name":"Geoff Cox","image":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/d1488b20cd7d55657e0b69f7d779c942?s=400&d=mp"},"description":" "},{"@type":"WebSite","@id":"https://redgeoff.com/#website","url":"https://redgeoff.com/","name":"redgeoff","description":" ","publisher":{"@id":"https://redgeoff.com/#author"},"inLanguage":"en-us"},{"@type":"WebPage","@id":"https://redgeoff.com/posts/template-queries/#webpage","url":"https://redgeoff.com/posts/template-queries/","name":"What are MSON Template Queries?","isPartOf":{"@id":"https://redgeoff.com/#website"},"about":{"@id":"https://redgeoff.com/#author"},"datePublished":"2021-02-08T00:00:00+00:00","dateModified":"2021-02-08T00:00:00+00:00","description":"Template Queries are dynamic templates constructed with MongoDB-style operators. They allow you to customize MSON components with less code and are very extensible.","inLanguage":"en-us","potentialAction":[{"@type":"ReadAction","target":["https://redgeoff.com/posts/template-queries/"]}]},{"@type":"Article","isPartOf":{"@id":"https://redgeoff.com/posts/template-queries/#webpage"},"mainEntityOfPage":{"@id":"https://redgeoff.com/posts/template-queries/#webpage"},"headline":"What are MSON Template Queries?","image":["https://redgeoff.com/posts/template-queries/template-queries.png"],"datePublished":"2021-02-08T00:00:00+00:00","dateModified":"2021-02-08T00:00:00+00:00","publisher":{"@id":"https://redgeoff.com/#author"},"keywords":["javascript","json","programming","mongodb"],"articleSection":["Programming"],"inLanguage":"en-us","author":{"@type":"Person","name":null},"potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://redgeoff.com/posts/template-queries/#comments"]}]}]}</script><link type=text/css rel=stylesheet href=/css/print.css media=print><link type=text/css rel=stylesheet href=/css/poole.css><link type=text/css rel=stylesheet href=/css/hyde.css><style type=text/css>.sidebar{background-color:#fc2803}.read-more-link a{border-color:#fc2803}.pagination li a{color:#fc2803;border:1px solid #fc2803}.pagination li.active a{background-color:#fc2803}.pagination li a:hover{background-color:#fc2803;opacity:.75}footer a,.content a,.related-posts li a:hover{color:#fc2803}</style><link type=text/css rel=stylesheet href=/css/blog.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin=anonymous><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class=container><div class=sidebar-about><div class=author-image><img src="https://www.gravatar.com/avatar/d1488b20cd7d55657e0b69f7d779c942?s=200&d=mp" class="img-circle img-headshot center" alt=Gravatar></div><h1>redgeoff</h1><p class=lead></p></div><nav><ul class=sidebar-nav><li><a href=https://redgeoff.com/>Home</a></li><li><a href=/posts/>Posts</a></li><li><a href=/publications/>Publications</a></li><li><a href=/about/>About</a></li><li><a href=/music/>Music</a></li></ul></nav><section class=social-icons><a href=https://github.com/redgeoff rel=me title=GitHub target=_blank><i class="fab fa-github" aria-hidden=true></i></a><a href=https://www.linkedin.com/in/geoffrey-cox rel=me title=Linkedin target=_blank><i class="fab fa-linkedin" aria-hidden=true></i></a><a href=https://medium.com/@redgeoff rel=me title=Medium target=_blank><i class="fab fa-medium" aria-hidden=true></i></a><a href="https://stackoverflow.com/users/2831606/redgeoff?tab=profile" rel=me title=StackOverflow target=_blank><i class="fab fa-stack-overflow" aria-hidden=true></i></a><a href=https://twitter.com/coxgeoffrey rel=me title=Twitter target=_blank><i class="fab fa-twitter" aria-hidden=true></i></a></section></div></aside><main class="content container"><div class=post><h1 class=title>What are MSON Template Queries?</h1><div class=post-date><time datetime=2021-02-08T00:00:00Z>Feb 8, 2021</time> &#183; 5 min read</div><div><figure class=image><img src=/posts/template-queries/template-queries.png alt="Template Queries"></figure><p>Template Queries are dynamic templates constructed with MongoDB-style operators. They allow you to customize MSON components with less code and are very extensible.</p><h3 id=ok-but-what-the-heck-is-mson>OK, but what the heck is MSON?</h3><p><a href=https://github.com/redgeoff/mson>MSON</a> is a low-code way to create apps from JSON. The ultimate goal of <a href=https://github.com/redgeoff/mson>MSON</a> is to allow anyone to develop software visually. You can also use pieces of <a href=https://github.com/redgeoff/mson>MSON</a> to turbo charge your existing apps.</p><p>A simple form component used to collect a name and email address could look like:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js>{
  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;MyForm&#39;</span>,
  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Form&#39;</span>,
  <span style=color:#a6e22e>fields</span><span style=color:#f92672>:</span> [
    { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;TextField&#39;</span>, <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Name&#39;</span> },
    { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;EmailField&#39;</span>, <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Email&#39;</span> }
  ]
}
</code></pre></div><p>You can read more about MSON&rsquo;s language principles <a href=https://redgeoff.com/posts/everyone-can-make-software>here</a>.</p><h3 id=what-are-mongodb-operators>What are MongoDB operators?</h3><p>MongoDB uses an extensive query language that is written in JSON. Because this language is so powerful, a number of projects, that work independently from MongoDB, have adopted support for the query language:</p><ol><li>In-memory libraries for JS, like <a href=https://github.com/kofrasa/mingo>mingo</a> and <a href=https://github.com/crcn/sift.js/>sift</a></li><li>Operators in <a href=https://sequelize.org/master/manual/model-querying-basics.html>sequelize ORM</a></li><li>Other databases, like <a href=https://stackoverflow.com/questions/45976416/couchdb-mango-queries-couchdb-2-0-1>CouchDB</a></li></ol><p>This query language also contains a construct for <a href=https://docs.mongodb.com/manual/reference/operator/aggregation/>pipeline aggregations</a>, which can be used to execute operations like <code>$add</code>, <code>$multiply</code>, <code>$filter</code>, <code>$map</code>, etc&mldr; For example:</p><pre><code>{
  $add: [ 1, 2 ]
}
</code></pre><h3 id=a-basic-mson-template-query>A basic MSON Template Query</h3><p>Now that you have that background, let&rsquo;s take a look at an example where we extract the year from a user-provided date. Upon selecting a date with the date picker, you&rsquo;ll see that the <code>Year</code> field is populated:</p><iframe src="https://codesandbox.io/embed/mson-template-query-6zb3b?fontsize=14&hidenavigation=1&theme=dark" style=width:100%;height:500px;border:0;border-radius:4px;overflow:hidden allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><p>Let&rsquo;s step through this example. First, we construct a form with <code>date</code> and <code>year</code> fields:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js>{
  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Form&#34;</span>,
  <span style=color:#a6e22e>fields</span><span style=color:#f92672>:</span> [
    {
      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;date&#34;</span>,
      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;DateField&#34;</span>,
      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Date&#34;</span>
    },
    {
      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;year&#34;</span>,
      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;IntegerField&#34;</span>,
      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Year&#34;</span>
    }
  ]
}
</code></pre></div><p>Second, we listen for changes to the <code>date</code> value, extract the year and then set the value of the <code>year</code> field:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js>{
  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Form&#34;</span>,
  <span style=color:#a6e22e>fields</span><span style=color:#f92672>:</span> ...,
  <span style=color:#a6e22e>listeners</span><span style=color:#f92672>:</span> [
    {
      <span style=color:#a6e22e>event</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;fields.date.value&#34;</span>,
      <span style=color:#a6e22e>actions</span><span style=color:#f92672>:</span> [
        {
          <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Set&#34;</span>,
          <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;fields.year.value&#34;</span>,
          <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>$year</span><span style=color:#f92672>:</span> {
              <span style=color:#a6e22e>$toDate</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;{{fields.date.value}}&#34;</span>
            }
          }
        }
      ]
    }
  ]
}
</code></pre></div><p>The <code>$toDate</code> operator is used to convert the date value, which is in milliseconds, to a date object. The <code>$year</code> operator is used to extract the year portion from the date. The <code>Set</code> action is native to MSON and is used to set the value of the <code>year</code> field.</p><p>Pretty cool? Let&rsquo;s go a bit deeper&mldr;</p><h3 id=how-can-we-make-this-reusable>How can we make this reusable?</h3><p>You can create custom actions, which can then be reused. Let&rsquo;s assume that we want to create an <code>app.GetYear</code> action that retrieves the year from a DateField value:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=color:#a6e22e>compiler</span>.<span style=color:#a6e22e>registerComponent</span>(<span style=color:#e6db74>&#34;app.GetYear&#34;</span>, {
  <span style=color:#75715e>// Extend Set, a core MSON component, that sets a
</span><span style=color:#75715e></span>  <span style=color:#75715e>// property on another component
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Set&#34;</span>,

  <span style=color:#75715e>// Define the inputs to the custom action
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>schema</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Form&#34;</span>,
    <span style=color:#a6e22e>fields</span><span style=color:#f92672>:</span> [
      {
        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;date&#34;</span>,
        <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;DateField&#34;</span>,
        <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
      }
    ]
  },

  <span style=color:#75715e>// Omitting the &#34;name&#34; here allows the value
</span><span style=color:#75715e></span>  <span style=color:#75715e>// to be passed to the next action via
</span><span style=color:#75715e></span>  <span style=color:#75715e>// &#34;{{arguments}}&#34;
</span><span style=color:#75715e></span>  <span style=color:#75715e>//
</span><span style=color:#75715e></span>  <span style=color:#75715e>// name: &#34;&#34;,
</span><span style=color:#75715e></span>
  <span style=color:#75715e>// Use the template query to extract the year
</span><span style=color:#75715e></span>  <span style=color:#75715e>// from the date
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>$year</span><span style=color:#f92672>:</span> {
      <span style=color:#a6e22e>$toDate</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;{{date}}&#34;</span>
    }
  }
});
</code></pre></div><p>We can then use this custom action in a chain of actions:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>compiler</span>.<span style=color:#a6e22e>newComponent</span>({
  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Form&#34;</span>,
  <span style=color:#a6e22e>fields</span><span style=color:#f92672>:</span> ...,
  <span style=color:#a6e22e>listeners</span><span style=color:#f92672>:</span> [
    {
      <span style=color:#a6e22e>event</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;fields.date.value&#34;</span>,
      <span style=color:#a6e22e>actions</span><span style=color:#f92672>:</span> [
        <span style=color:#75715e>// Extract the year and pass it to the next action
</span><span style=color:#75715e></span>        {
          <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;app.GetYear&#34;</span>,
          <span style=color:#a6e22e>date</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;{{fields.date.value}}&#34;</span>
        },

        <span style=color:#75715e>// Use the extracted year to set the year field
</span><span style=color:#75715e></span>        {
          <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Set&#34;</span>,
          <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;fields.year.value&#34;</span>,

          <span style=color:#75715e>// {{arguments}} is the output of app.GetYear
</span><span style=color:#75715e></span>          <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;{{arguments}}&#34;</span>
        }
      ]
    }
  ]
});
</code></pre></div><p>Here is the completed example:</p><iframe src="https://codesandbox.io/embed/mson-custom-action-cziwj?fontsize=14&hidenavigation=1&theme=dark" style=width:100%;height:500px;border:0;border-radius:4px;overflow:hidden allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id=another-example-a-conditional-survey-question>Another example: a conditional survey question</h3><p>Let&rsquo;s assume that we have a survey question and we want the user to be able to enter a free response when they select <code>Other</code>:</p><iframe src="https://codesandbox.io/embed/mson-dynamic-survey-question-713s8?fontsize=14&hidenavigation=1&theme=dark" style=width:100%;height:500px;border:0;border-radius:4px;overflow:hidden allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><p>We define the form and hide the <code>covidOther</code> text field by default:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js>{
  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Form&#34;</span>,
  <span style=color:#a6e22e>fields</span><span style=color:#f92672>:</span> [
    {
      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;covid&#34;</span>,
      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;SelectField&#34;</span>,
      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;My government&#39;s response to COVID-19 was...&#34;</span>,
      <span style=color:#a6e22e>fullWidth</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
      <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> [
        { <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Good&#34;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;good&#34;</span> },
        { <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Bad&#34;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;bad&#34;</span> },
        { <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Other&#34;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;other&#34;</span> }
      ]
    },
    {
      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;covidOther&#34;</span>,
      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;TextField&#34;</span>,
      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Please explain&#34;</span>,
      <span style=color:#a6e22e>multiline</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
      <span style=color:#a6e22e>hidden</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
    }
  ]
}
</code></pre></div><p>If the user selects <code>Other</code>, we toggle the <code>hidden</code> boolean property of the <code>covidOther</code> field. The <code>$ne</code> operator is shorthand for <em>not equal</em>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=color:#a6e22e>listeners</span><span style=color:#f92672>:</span> [
  {
    <span style=color:#a6e22e>event</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;fields.covid.value&#34;</span>,
    <span style=color:#a6e22e>actions</span><span style=color:#f92672>:</span> [
      {
        <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Set&#34;</span>,
        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;fields.covidOther.hidden&#34;</span>,
        <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> {
          <span style=color:#a6e22e>$ne</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;{{fields.covid.value}}&#34;</span>, <span style=color:#e6db74>&#34;other&#34;</span>]
        }
      }
    ]
  }
]
</code></pre></div><h3 id=why-doesnt-mson-support-custom-js-in-templates>Why doesn&rsquo;t MSON support custom JS in templates?</h3><p>By now, you can probably see the power of Template Queries, but you may be wondering why MSON doesn&rsquo;t support custom JavaScript. To support custom JS in template parameters, it would require breaking two of MSON&rsquo;s core design principles:</p><ol><li><p><strong>Compilation by instantiation</strong> - Components are <em>compiled</em> into JS objects by simply instantiating a JS object and setting the props dynamically. This method of <em>compilation</em> allows us to avoid a transpilation step and makes it much easier to dynamically modify components.</p></li><li><p><strong>Serialization & deserialization without <code>eval()</code></strong> - Components can be serialized using <code>JSON.stringfy()</code> and stored practically anywhere. Moreover, components can be deserialized by dynamically compiling the result of <code>JSON.parse()</code>. As a result, raw JS (in a string), including JS template literals, are not supported as deserializing such JS would require the use of <code>eval()</code> or <code>new Function()</code>, which would expose a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#never_use_eval!>XSS vulnerability</a> and add significant performance issues.</p></li></ol><p>You can read more about this reasoning <a href=https://github.com/redgeoff/mson/blob/master/DESIGN.md#why-doesnt-mson-support-custom-js-in-template-parameters>here</a>.</p><h3 id=wrap-it-up>Wrap It Up!</h3><p>Template Queries add a ton of capability to <a href=https://github.com/redgeoff/mson>MSON</a> by providing another powerful way of customizing your <a href=https://github.com/redgeoff/mson>MSON</a> components. And, they can be particularly useful in minimizing the code it takes to conditionally chain a series of actions.</p><p>If you liked this post, please give it a like or two. Happy building!</p></div><div><ul class=tags><li><a href=https://redgeoff.com/tags/javascript/ class=tag-link>javascript</a></li><li><a href=https://redgeoff.com/tags/json/ class=tag-link>json</a></li><li><a href=https://redgeoff.com/tags/programming/ class=tag-link>programming</a></li><li><a href=https://redgeoff.com/tags/mongodb/ class=tag-link>mongodb</a></li></ul></div><div class=share-buttons><a class=twitter-share-button href=# title="Share on Twitter" data-url=https://redgeoff.com/posts/template-queries/ data-text="What are MSON Template Queries?"><i class="fab fa-twitter"></i></a><a class=linkedin-share-button href=# title="Share on LinkedIn" data-url=https://redgeoff.com/posts/template-queries/ data-text="What are MSON Template Queries?"><i class="fab fa-linkedin-in"></i></a><a class=facebook-share-button href=# title="Share on Facebook" data-url=https://redgeoff.com/posts/template-queries/ data-text="What are MSON Template Queries?"><i class="fab fa-facebook"></i></a><a class=telegram-share-button href=# title="Share on Telegram" data-url=https://redgeoff.com/posts/template-queries/ data-text="What are MSON Template Queries?"><i class="fab fa-telegram"></i></a><a class=pinterest-share-button href=# title="Share on Pinterest" data-url=https://redgeoff.com/posts/template-queries/ data-text="What are MSON Template Queries?"><i class="fab fa-pinterest"></i></a></div></div></main><footer><div><p>&copy; Geoff Cox 2021</p></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0=" crossorigin=anonymous></script><script src=/js/jquery.min.js></script><script src=/js/soho.js></script></body></html>